<Project Sdk="Microsoft.NET.Sdk">

    <PropertyGroup>
        <RootNamespace>ScrubJay</RootNamespace>
        <AssemblyName>ScrubJay.Core</AssemblyName>
        
        <TargetFrameworks>
            <!-- All supported .Net Core versions ~~ https://dotnet.microsoft.com/en-us/platform/support/policy/dotnet-core -->
            net8.0;net7.0;net6.0;
            <!-- Support for both .Net Standard versions ~~ .Net Standard 2.0 so we can be consumed by Source Generators, which are currently limited to that version -->
            netstandard2.1;netstandard2.0;
            <!-- Only supported version of .Net Framework ~~ https://dotnet.microsoft.com/en-us/platform/support/policy/dotnet-framework -->
            net481;
        </TargetFrameworks>
        <LangVersion>latest</LangVersion>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <AllowUnsafeBlocks>true</AllowUnsafeBlocks>

        <!-- Static Code Analysis -->
        <AnalysisLevel>latest</AnalysisLevel>
        <AnalysisMode>All</AnalysisMode>
        <EnforceCodeStyleInBuild>true</EnforceCodeStyleInBuild>

        <!-- Ensure that all Polyfilled types are public -->
        <PolyPublic>true</PolyPublic>

        <!-- Quiet Warnings -->
        <NoWarn>
            CS0436;
            MA0048;
            CA1000;
            CA1716;
            CA2225;
            S1939;
            MA0077;
            MA0094;
            CA1710;
            CA1051;
            CA1034;
            CA1725;
            CA1062; <!-- Externallay visible methods should validate parameters to not be null -->
            S927;   <!-- Rename parameter to match interface declaration -->
            S1133;  <!-- Remove depreciated code [Obsolete] -->
            S2930;  <!-- Dispose when no longer needed ~ does not respect any attributes and gives false positives -->
            S3267;  <!-- Loops should be simplified with Where -->
            MA0061; S1006;  <!-- Remove default parameters on overrides to match signature -->
            CA2237; <!-- Add [Serializable] to types -->
            S3963; CA1810;  <!-- Inline static fields -->
            CA1305; <!-- Localization Related -->
        </NoWarn>

        <!--        &lt;!&ndash; Setup NuGet &ndash;&gt;-->
        <!--        <IsPackable>true</IsPackable>-->
        <!--        <EnablePackageValidation>true</EnablePackageValidation>-->
        <!--        <GeneratePackageOnBuild>false</GeneratePackageOnBuild>-->
        <!--        &lt;!&ndash; NuGet Package Information &ndash;&gt;-->
        <!--        <Title>ScrubJay Core Libraries</Title>-->
        <!--        <Authors>Timothy Jay</Authors>-->
        <!--        <Description>-->
        <!--            The core shared library for all ScrubJay namespaces.-->
        <!--        </Description>-->
        <!--        <RepositoryUrl>https://github.com/Dissolution/ScrubJay.Core</RepositoryUrl>-->
        <!--        <RepositoryType>git</RepositoryType>-->
        <!--        <PackageReadmeFile>README.md</PackageReadmeFile>-->
        <!--        <PackageLicenseExpression>MIT</PackageLicenseExpression>-->
        <!--        <PackageIcon>jay.png</PackageIcon>-->
        <!--        <PackageOutputPath>..\packages\</PackageOutputPath>-->
        <!--        <PackageVersion>0.0.5-alpha</PackageVersion>-->
    </PropertyGroup>

    <!-- NuGet -->
    <ItemGroup>
        <None Include="..\README.md" Pack="true" PackagePath="\"/>
        <None Include="..\LICENSE.txt" Pack="true" PackagePath="\"/>
        <None Include="..\jay.png" Pack="true" PackagePath="\"/>
    </ItemGroup>

    <!-- Global Usings -->
    <ItemGroup>
        <Using Include="System.ComponentModel"/>
        <Using Include="System.Diagnostics"/>
        <Using Include="System.Diagnostics.CodeAnalysis"/>
        <Using Include="System.Numerics"/>
        <Using Include="System.Runtime.CompilerServices"/>
        <Using Include="System.Runtime.InteropServices"/>
        <Using Include="System.Collections"/>

        <Using Include="ScrubJay.GlobalHelper" Static="true"/>
        <Using Include="ScrubJay.Buffers"/>
        <Using Include="ScrubJay.Extensions"/>
        <Using Include="ScrubJay.Utilities"/>
        <Using Include="ScrubJay.Validation"/>

        <Using Include="JetBrains.Annotations"/>
    </ItemGroup>

    <ItemGroup Condition=" '$(TargetFramework)' == 'net481' ">
        <PackageReference Include="System.Memory" Version="4.5.5">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
    </ItemGroup>

    <ItemGroup Condition=" '$(TargetFramework)' == 'netstandard2.0' ">
        <PackageReference Include="System.Memory" Version="4.5.5">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
    </ItemGroup>

    <ItemGroup Condition=" '$(TargetFramework)' == 'netstandard2.1' ">
        <PackageReference Include="System.Memory" Version="4.5.5">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
        <PackageReference Include="System.Runtime.CompilerServices.Unsafe" Version="6.0.0">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
    </ItemGroup>

    <ItemGroup>
        <PackageReference Include="Fody" Version="6.8.1">
            <PrivateAssets>all</PrivateAssets>
            <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
        </PackageReference>
        <PackageReference Include="InlineIL.Fody" Version="1.9.0">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
        <PackageReference Include="JetBrains.Annotations" Version="2024.2.0">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
        <PackageReference Include="Polyfill" Version="6.5.0">
            <PrivateAssets>all</PrivateAssets>
            <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
        </PackageReference>
    </ItemGroup>

    <!-- Static Code Analyzers -->
    <ItemGroup>
        <PackageReference Include="Meziantou.Analyzer" Version="2.0.163">
            <PrivateAssets>all</PrivateAssets>
            <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
        </PackageReference>
        <PackageReference Include="SonarAnalyzer.CSharp" Version="9.32.0.97167">
            <PrivateAssets>all</PrivateAssets>
            <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
        </PackageReference>
        <PackageReference Include="Roslynator.Analyzers" Version="4.12.4">
            <PrivateAssets>all</PrivateAssets>
            <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
        </PackageReference>
    </ItemGroup>
    
    <ItemGroup>
        <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
            <_Parameter1>ScrubJay.Core.Tests</_Parameter1>
        </AssemblyAttribute>
    </ItemGroup>
</Project>
